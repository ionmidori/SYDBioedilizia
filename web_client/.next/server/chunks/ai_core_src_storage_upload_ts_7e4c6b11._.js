module.exports=[52887,e=>e.a(async(a,t)=>{try{var o=e.i(36444),r=a([o]);async function n(e,a,t){let r=(0,o.storage)().bucket(),n=Date.now(),g=t.replace(/[^a-z0-9_-]/gi,"_").toLowerCase(),i=`generated/${a}/${n}_${g}.jpg`,l=r.file(i);try{console.log(`[Storage] Uploading ${e.length} bytes to ${i}...`),await l.save(e,{contentType:"image/jpeg",metadata:{contentType:"image/jpeg",generatedBy:"JIT-Pipeline"}});let[a]=await l.getSignedUrl({action:"read",expires:Date.now()+31536e6});return console.log(`[Storage] ✅ Upload success. URL: ${a.substring(0,50)}...`),a}catch(e){throw console.error(`[Storage] ❌ Failed to upload image to ${i}:`,e),Error(`Image upload failed: ${e instanceof Error?e.message:"Unknown error"}`)}}[o]=r.then?(await r)():r,e.s(["uploadGeneratedImage",()=>n]),t()}catch(e){t(e)}},!1)];

//# sourceMappingURL=ai_core_src_storage_upload_ts_7e4c6b11._.js.map