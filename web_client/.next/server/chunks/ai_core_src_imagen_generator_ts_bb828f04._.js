module.exports=[5023,e=>{"use strict";var t=e.i(47111);async function r(e,r){console.log("[Painter] Starting renovation generation...");let o=`${r}

Output a high-res renovation image.`,n=process.env.FIREBASE_PROJECT_ID,a="us-central1";if(!n)throw Error("FIREBASE_PROJECT_ID not found");let i=new t.VertexAI({project:n,location:a,googleAuthOptions:process.env.FIREBASE_CLIENT_EMAIL&&process.env.FIREBASE_PRIVATE_KEY?{credentials:{client_email:process.env.FIREBASE_CLIENT_EMAIL,private_key:process.env.FIREBASE_PRIVATE_KEY.replace(/\\n/g,"\n")}}:void 0}),s=process.env.VISION_MODEL_VERSION,l=s||"gemini-2.5-flash-image";console.log(`[Painter] ENV VISION_MODEL_VERSION: ${s}`),console.log(`[Painter] Initializing model: ${l} in ${a}`);let E=i.getGenerativeModel({model:l,safetySettings:[{category:t.HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:t.HarmBlockThreshold.BLOCK_ONLY_HIGH},{category:t.HarmCategory.HARM_CATEGORY_HARASSMENT,threshold:t.HarmBlockThreshold.BLOCK_ONLY_HIGH},{category:t.HarmCategory.HARM_CATEGORY_HATE_SPEECH,threshold:t.HarmBlockThreshold.BLOCK_ONLY_HIGH},{category:t.HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:t.HarmBlockThreshold.BLOCK_ONLY_HIGH}],generationConfig:{maxOutputTokens:8192,temperature:.2,topP:.95}});try{let t,r=e.toString("base64"),n={contents:[{role:"user",parts:[{inlineData:{mimeType:"image/jpeg",data:r}},{text:o}]}]};console.log("[Painter] Sending request to Vertex AI...");let a=await E.generateContent(n),i=await a.response;if(!i.candidates||0===i.candidates.length)throw Error("No candidates returned");for(let e of i.candidates[0].content.parts){if(e.inlineData&&e.inlineData.mimeType.startsWith("image/")){t=e.inlineData.data;break}e.fileData&&e.fileData.mimeType.startsWith("image/")&&console.warn("[Painter] Received fileData URL instead of inlineData, functionality might need update.")}if(!t)throw console.error("[Painter] Full Response:",JSON.stringify(i,null,2)),Error("Model returned valid response but NO image data found.");let s=Buffer.from(t,"base64");return console.log(`[Painter] âœ… Generation complete! Image size: ${(s.length/1024).toFixed(2)} KB`),s}catch(e){if(console.error("[Painter] Error:",e),e instanceof Error&&e.message.includes("404"))throw Error(`Model ${l} not found in ${a}. Ensure Project ID is allowlisted.`);throw Error(`Painter generation failed: ${e instanceof Error?e.message:"Unknown error"}`)}}e.s(["generateRenovation",()=>r])}];

//# sourceMappingURL=ai_core_src_imagen_generator_ts_bb828f04._.js.map